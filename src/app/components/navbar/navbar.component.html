<!-- Navbar moderno con diseño elegante -->
<nav class="navbar-modern">
  <div class="container-modern">
    <div class="d-flex justify-content-between align-items-center" style="height: 70px;">
      
      <!-- Logo y marca -->
      <div class="d-flex align-items-center gap-3">
        <a routerLink="/" class="navbar-brand d-flex align-items-center gap-3 text-decoration-none">
          <div class="brand-icon">
            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; font-weight: bold; box-shadow: var(--shadow-md);">
              <span class="material-symbols-outlined">music_note</span>
            </div>
          </div>
          <div class="brand-text">
            <h4 class="mb-0" style="color: var(--gray-900); font-weight: 700; font-size: 1.25rem;">Casa de Música Castillo</h4>
            <small style="color: var(--gray-500); font-size: 0.75rem; font-weight: 500;">Instrumentos Musicales</small>
          </div>
        </a>
      </div>

      <!-- Menú de navegación principal -->
      <div class="d-none d-md-flex align-items-center gap-1">
        
        <!-- Link Home -->
        <a routerLink="/home" 
           routerLinkActive="nav-link-active" 
           class="nav-link-modern">
          <span class="material-symbols-outlined" style="margin-right: 0.5rem;">home</span>
          Inicio
        </a>
        
        <!-- Enlaces para usuarios autenticados -->
        <ng-container *ngIf="isLoggedIn$ | async; else notLoggedIn">
          
          <!-- Dashboard -->
          <a routerLink="/dashboard" 
             routerLinkActive="nav-link-active" 
             class="nav-link-modern">
            <span class="material-symbols-outlined" style="margin-right: 0.5rem;">dashboard</span>
            Dashboard
          </a>

          <!-- Separador visual -->
          <div style="width: 1px; height: 24px; background: var(--gray-300); margin: 0 0.5rem;"></div>

          <!-- Botón de logout -->
          <button 
            (click)="logout()" 
            class="btn btn-outline-danger btn-sm d-flex align-items-center gap-2"
            style="border-radius: 20px; padding: 0.5rem 1rem;">
            <span class="material-symbols-outlined">logout</span>
            <span>Cerrar Sesión</span>
          </button>
          
        </ng-container>
        
        <!-- Enlaces para usuarios no autenticados -->
        <ng-template #notLoggedIn>
          
          <!-- Login -->
          <a routerLink="/login" 
             routerLinkActive="nav-link-active" 
             class="nav-link-modern">
            <span class="material-symbols-outlined" style="margin-right: 0.5rem;">login</span>
            Iniciar Sesión
          </a>
          
          <!-- Separador visual -->
          <div style="width: 1px; height: 24px; background: var(--gray-300); margin: 0 0.5rem;"></div>
          
          <!-- Register -->
          <a routerLink="/register" 
             class="btn btn-primary btn-sm d-flex align-items-center gap-2"
             style="border-radius: 20px; padding: 0.5rem 1rem;">
            <span class="material-symbols-outlined">person_add</span>
            <span>Crear Cuenta</span>
          </a>
          
        </ng-template>
      </div>

      <!-- Menú hamburguesa para móvil -->
      <div class="d-md-none">
        <button 
          class="btn btn-outline-secondary btn-sm"
          (click)="toggleMobileMenu()"
          style="border-radius: 8px; padding: 0.5rem;">
          <span class="material-symbols-outlined" style="font-size: 1.2rem;">{{ mobileMenuOpen ? 'close' : 'menu' }}</span>
        </button>
      </div>

    </div>

    <!-- Menú móvil desplegable -->
    <div class="mobile-menu d-md-none" [class.mobile-menu-open]="mobileMenuOpen">
      <div class="mobile-menu-content">
        
        <!-- Link Home -->
        <a routerLink="/home" 
           routerLinkActive="mobile-link-active" 
           class="mobile-nav-link"
           (click)="closeMobileMenu()">
          <span class="material-symbols-outlined" style="margin-right: 0.75rem;">home</span>
          <span>Inicio</span>
        </a>
        
        <!-- Enlaces para usuarios autenticados -->
        <ng-container *ngIf="isLoggedIn$ | async; else mobileNotLoggedIn">
          
          <!-- Dashboard -->
          <a routerLink="/dashboard" 
             routerLinkActive="mobile-link-active" 
             class="mobile-nav-link"
             (click)="closeMobileMenu()">
            <span class="material-symbols-outlined" style="margin-right: 0.75rem;">dashboard</span>
            <span>Dashboard</span>
          </a>

          <!-- Divisor -->
          <div style="height: 1px; background: var(--gray-200); margin: 0.5rem 0;"></div>

          <!-- Logout -->
          <button 
            (click)="logout(); closeMobileMenu()" 
            class="mobile-nav-link" 
            style="width: 100%; text-align: left; background: none; border: none; color: var(--danger-600);">
            <span class="material-symbols-outlined" style="margin-right: 0.75rem;">logout</span>
            <span>Cerrar Sesión</span>
          </button>
          
        </ng-container>
        
        <!-- Enlaces móviles para usuarios no autenticados -->
        <ng-template #mobileNotLoggedIn>
          
          <!-- Login -->
          <a routerLink="/login" 
             routerLinkActive="mobile-link-active" 
             class="mobile-nav-link"
             (click)="closeMobileMenu()">
            <span class="material-symbols-outlined" style="margin-right: 0.75rem;">login</span>
            <span>Iniciar Sesión</span>
          </a>
          
          <!-- Register -->
          <a routerLink="/register" 
             routerLinkActive="mobile-link-active" 
             class="mobile-nav-link"
             (click)="closeMobileMenu()">
            <span class="material-symbols-outlined" style="margin-right: 0.75rem;">person_add</span>
            <span>Crear Cuenta</span>
          </a>
          
        </ng-template>
      </div>
    </div>

  </div>
</nav>
