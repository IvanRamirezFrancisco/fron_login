<!-- Header Casa de Música Castillo - Diseño Profesional --><!-- Header Casa de Música Castillo - Diseño Profesional -->

<nav class="main-header"><nav class="main-header">

  <div class="header-container">  <div class="header-container">

    <!-- Logo Casa de Música Castillo -->    <!-- Logo Casa de Música Castillo -->

    <div class="logo-section">    <div class="logo-section">

      <a routerLink="/" class="logo-link">      <a routerLink="/" class="logo-link">

        <div class="logo-icon">        <div class="logo-icon">

          <span class="material-symbols-outlined">music_note</span>          <span class="material-symbols-outlined">music_note</span>

        </div>        </div>

        <div class="logo-text">        <div class="logo-text">

          <span class="brand-name">Casa de Música Castillo</span>          <span class="brand-name">Casa de Música Castillo</span>

        </div>        </div>

      </a>      </a>

    </div>    </div>



    <!-- Barra de búsqueda -->    <!-- Barra de búsqueda -->

    <div class="search-section">    <div class="search-section">

      <div class="search-container">      <div class="search-container">

        <input         <input 

          type="text"           type="text" 

          class="search-input"           class="search-input" 

          placeholder="Busca guitarras, pianos, y miles..."          placeholder="Busca guitarras, pianos, y miles..."

          [(ngModel)]="searchQuery"          [(ngModel)]="searchQuery"

          (keyup.enter)="performSearch()">          (keyup.enter)="performSearch()">

        <button class="search-btn" (click)="performSearch()">        <button class="search-btn" (click)="performSearch()">

          <span class="material-symbols-outlined">search</span>          <span class="material-symbols-outlined">search</span>

        </button>        </button>

      </div>      </div>

    </div>    </div>



    <!-- Navegación y acciones -->    <!-- Navegación y acciones -->

    <div class="nav-actions">    <div class="nav-actions">

      <!-- Navegación principal -->      <!-- Navegación principal -->

      <div class="nav-links">      <div class="nav-links">

        <a routerLink="/" class="nav-link" [class.active]="isActive('/')">Inicio</a>        <a routerLink="/" class="nav-link" [class.active]="isActive('/')">Inicio</a>

        <a routerLink="/ofertas" class="nav-link" [class.active]="isActive('/ofertas')">Ofertas</a>        <a routerLink="/ofertas" class="nav-link" [class.active]="isActive('/ofertas')">Ofertas</a>

        <a routerLink="/catalogo" class="nav-link" [class.active]="isActive('/catalogo')">Catálogo</a>        <a routerLink="/catalogo" class="nav-link" [class.active]="isActive('/catalogo')">Catálogo</a>

        <a routerLink="/ayuda" class="nav-link" [class.active]="isActive('/ayuda')">Ayuda</a>        <a routerLink="/ayuda" class="nav-link" [class.active]="isActive('/ayuda')">Ayuda</a>

      </div>      </div>



      <!-- Iconos de usuario y carrito -->      <!-- Iconos de usuario y carrito -->

      <div class="user-actions">      <div class="user-actions">

        <button class="action-btn" (click)="toggleUserMenu()">        <button class="action-btn" (click)="toggleUserMenu()">

          <span class="material-symbols-outlined">person</span>          <span class="material-symbols-outlined">person</span>

        </button>        </button>

        <button class="action-btn cart-btn" routerLink="/carrito">        <button class="action-btn cart-btn" routerLink="/carrito">

          <span class="material-symbols-outlined">shopping_cart</span>          <span class="material-symbols-outlined">shopping_cart</span>

          <span class="cart-count" *ngIf="cartItems > 0">{{ cartItems }}</span>          <span class="cart-count" *ngIf="cartItems > 0">{{ cartItems }}</span>

        </button>        </button>

      </div>      </div>



      <!-- Menú hamburguesa para móvil -->      <!-- Menú hamburguesa para móvil -->

      <button class="mobile-menu-btn" (click)="toggleMobileMenu()">      <button class="mobile-menu-btn" (click)="toggleMobileMenu()">

        <span class="material-symbols-outlined">{{ showMobileMenu ? 'close' : 'menu' }}</span>        <span class="material-symbols-outlined">{{ showMobileMenu ? 'close' : 'menu' }}</span>

      </button>      </button>

    </div>    </div>



    <!-- Menú desplegable de usuario -->    <!-- Menú desplegable de usuario -->

    <div class="user-dropdown" *ngIf="showUserMenu" (clickOutside)="closeUserMenu()">    <div class="user-dropdown" *ngIf="showUserMenu" (clickOutside)="closeUserMenu()">

      <div class="dropdown-content">      <div class="dropdown-content">

        <ng-container *ngIf="!isLoggedIn; else loggedInMenu">        <ng-container *ngIf="!isLoggedIn; else loggedInMenu">

          <a routerLink="/login" class="dropdown-item">          <a routerLink="/login" class="dropdown-item">

            <span class="material-symbols-outlined">login</span>            <span class="material-symbols-outlined">login</span>

            Iniciar Sesión            Iniciar Sesión

          </a>          </a>

          <a routerLink="/register" class="dropdown-item">          <a routerLink="/register" class="dropdown-item">

            <span class="material-symbols-outlined">person_add</span>            <span class="material-symbols-outlined">person_add</span>

            Registrarse            Registrarse

          </a>          </a>

        </ng-container>        </ng-container>

                

        <ng-template #loggedInMenu>        <ng-template #loggedInMenu>

          <a routerLink="/profile" class="dropdown-item">          <a routerLink="/profile" class="dropdown-item">

            <span class="material-symbols-outlined">account_circle</span>            <span class="material-symbols-outlined">account_circle</span>

            Mi Perfil            Mi Perfil

          </a>          </a>

          <a routerLink="/orders" class="dropdown-item">          <a routerLink="/orders" class="dropdown-item">

            <span class="material-symbols-outlined">shopping_bag</span>            <span class="material-symbols-outlined">shopping_bag</span>

            Mis Pedidos            Mis Pedidos

          </a>          </a>

          <div class="dropdown-divider"></div>          <div class="dropdown-divider"></div>

          <button (click)="logout()" class="dropdown-item logout-btn">          <button (click)="logout()" class="dropdown-item logout-btn">

            <span class="material-symbols-outlined">logout</span>            <span class="material-symbols-outlined">logout</span>

            Cerrar Sesión            Cerrar Sesión

          </button>          </button>

        </ng-template>        </ng-template>

      </div>      </div>

    </div>    </div>

  </div>  </div>



  <!-- Menú móvil -->  <!-- Menú móvil -->

  <div class="mobile-menu" *ngIf="showMobileMenu">  <div class="mobile-menu" *ngIf="showMobileMenu">

    <div class="mobile-menu-content">    <div class="mobile-menu-content">

      <!-- Búsqueda móvil -->      <!-- Búsqueda móvil -->

      <div class="mobile-search">      <div class="mobile-search">

        <input         <input 

          type="text"           type="text" 

          class="mobile-search-input"           class="mobile-search-input" 

          placeholder="Buscar productos..."          placeholder="Buscar productos..."

          [(ngModel)]="searchQuery"          [(ngModel)]="searchQuery"

          (keyup.enter)="performSearch()">          (keyup.enter)="performSearch()">

        <button class="mobile-search-btn" (click)="performSearch()">        <button class="mobile-search-btn" (click)="performSearch()">

          <span class="material-symbols-outlined">search</span>          <span class="material-symbols-outlined">search</span>

        </button>        </button>

      </div>      </div>



      <!-- Links de navegación móvil -->      <!-- Links de navegación móvil -->

      <div class="mobile-nav-links">      <div class="mobile-nav-links">

        <a routerLink="/" class="mobile-nav-link" (click)="closeMobileMenu()">        <a routerLink="/" class="mobile-nav-link" (click)="closeMobileMenu()">

          <span class="material-symbols-outlined">home</span>          <span class="material-symbols-outlined">home</span>

          Inicio          Inicio

        </a>        </a>

        <a routerLink="/ofertas" class="mobile-nav-link" (click)="closeMobileMenu()">        <a routerLink="/ofertas" class="mobile-nav-link" (click)="closeMobileMenu()">

          <span class="material-symbols-outlined">local_offer</span>          <span class="material-symbols-outlined">local_offer</span>

          Ofertas          Ofertas

        </a>        </a>

        <a routerLink="/catalogo" class="mobile-nav-link" (click)="closeMobileMenu()">        <a routerLink="/catalogo" class="mobile-nav-link" (click)="closeMobileMenu()">

          <span class="material-symbols-outlined">inventory_2</span>          <span class="material-symbols-outlined">inventory_2</span>

          Catálogo          Catálogo

        </a>        </a>

        <a routerLink="/ayuda" class="mobile-nav-link" (click)="closeMobileMenu()">        <a routerLink="/ayuda" class="mobile-nav-link" (click)="closeMobileMenu()">

          <span class="material-symbols-outlined">help</span>          <span class="material-symbols-outlined">help</span>

          Ayuda          Ayuda

        </a>        </a>

      </div>      </div>



      <!-- Acciones móvil -->      <!-- Acciones móvil -->

      <div class="mobile-actions">      <div class="mobile-actions">

        <ng-container *ngIf="!isLoggedIn; else mobileLoggedIn">        <ng-container *ngIf="!isLoggedIn; else mobileLoggedIn">

          <a routerLink="/login" class="mobile-action-btn btn-primary" (click)="closeMobileMenu()">          <a routerLink="/login" class="mobile-action-btn btn-primary" (click)="closeMobileMenu()">

            Iniciar Sesión            Iniciar Sesión

          </a>          </a>

          <a routerLink="/register" class="mobile-action-btn btn-secondary" (click)="closeMobileMenu()">          <a routerLink="/register" class="mobile-action-btn btn-secondary" (click)="closeMobileMenu()">

            Registrarse            Registrarse

          </a>          </a>

        </ng-container>        </ng-container>

                

        <ng-template #mobileLoggedIn>        <ng-template #mobileLoggedIn>

          <a routerLink="/profile" class="mobile-nav-link" (click)="closeMobileMenu()">          <a routerLink="/profile" class="mobile-nav-link" (click)="closeMobileMenu()">

            <span class="material-symbols-outlined">account_circle</span>            <span class="material-symbols-outlined">account_circle</span>

            Mi Perfil            Mi Perfil

          </a>          </a>

          <a routerLink="/orders" class="mobile-nav-link" (click)="closeMobileMenu()">          <a routerLink="/orders" class="mobile-nav-link" (click)="closeMobileMenu()">

            <span class="material-symbols-outlined">shopping_bag</span>            <span class="material-symbols-outlined">shopping_bag</span>

            Mis Pedidos            Mis Pedidos

          </a>          </a>

          <button (click)="logout(); closeMobileMenu()" class="mobile-action-btn logout-mobile">          <button (click)="logout(); closeMobileMenu()" class="mobile-action-btn logout-mobile">

            Cerrar Sesión            Cerrar Sesión

          </button>          </button>

        </ng-template>        </ng-template>

      </div>      </div>

    </div>    </div>

  </div>  </div>

</nav></nav>
      </div>

      <!-- Menú de navegación Casa de Música -->
      <div class="d-none d-md-flex align-items-center gap-2">
        
        <!-- Link Home -->
        <a routerLink="/home" 
           routerLinkActive="nav-link-active" 
           class="nav-link-modern" 
           style="color: rgba(255,255,255,0.9); padding: 0.75rem 1rem; border-radius: var(--border-radius-lg); text-decoration: none; font-family: var(--font-titulos); font-weight: 600; display: flex; align-items: center; transition: var(--transition);">
          <span class="material-symbols-outlined" style="margin-right: 0.5rem; font-size: 1.2rem;">home</span>
          Inicio
        </a>
        
        <!-- Enlaces para usuarios autenticados -->
        <ng-container *ngIf="isLoggedIn$ | async; else notLoggedIn">
          
          <!-- Dashboard -->
          <a routerLink="/dashboard" 
             routerLinkActive="nav-link-active" 
             class="nav-link-modern"
             style="color: rgba(255,255,255,0.9); padding: 0.75rem 1rem; border-radius: var(--border-radius-lg); text-decoration: none; font-family: var(--font-titulos); font-weight: 600; display: flex; align-items: center; transition: var(--transition);">
            <span class="material-symbols-outlined" style="margin-right: 0.5rem; font-size: 1.2rem;">dashboard</span>
            Panel de Control
          </a>

          <!-- Separador visual -->
          <div style="width: 2px; height: 30px; background: var(--color-resalte); margin: 0 1rem; border-radius: 1px;"></div>

          <!-- Botón de logout -->
          <button 
            (click)="logout()" 
            class="boton-secundario d-flex align-items-center gap-2"
            style="background: rgba(255,255,255,0.1); color: white; border: 2px solid var(--color-resalte); padding: 0.75rem 1.5rem;">
            <span class="material-symbols-outlined" style="font-size: 1.1rem;">logout</span>
            <span>Cerrar Sesión</span>
          </button>
          
        </ng-container>
        
        <!-- Enlaces para usuarios no autenticados -->
        <ng-template #notLoggedIn>
          
          <!-- Login -->
          <a routerLink="/login" 
             routerLinkActive="nav-link-active" 
             class="nav-link-modern"
             style="color: rgba(255,255,255,0.9); padding: 0.75rem 1rem; border-radius: var(--border-radius-lg); text-decoration: none; font-family: var(--font-titulos); font-weight: 600; display: flex; align-items: center; transition: var(--transition);">
            <span class="material-symbols-outlined" style="margin-right: 0.5rem; font-size: 1.2rem;">login</span>
            Iniciar Sesión
          </a>
          
          <!-- Separador visual -->
          <div style="width: 2px; height: 30px; background: var(--color-resalte); margin: 0 1rem; border-radius: 1px;"></div>
          
          <!-- Register -->
          <a routerLink="/register" 
             class="boton-accion d-flex align-items-center gap-2"
             style="padding: 0.75rem 1.5rem; text-decoration: none;">
            <span class="material-symbols-outlined" style="font-size: 1.1rem;">person_add</span>
            <span>Crear Cuenta</span>
          </a>
          
        </ng-template>
      </div>

      <!-- Menú hamburguesa para móvil Casa de Música -->
      <div class="d-md-none">
        <button 
          class="btn"
          (click)="toggleMobileMenu()"
          style="background: rgba(255,255,255,0.1); color: white; border: 2px solid var(--color-resalte); border-radius: var(--border-radius-lg); padding: 0.75rem; transition: var(--transition);">
          <span class="material-symbols-outlined" style="font-size: 1.3rem;">{{ mobileMenuOpen ? 'close' : 'menu' }}</span>
        </button>
      </div>

    </div>

    <!-- Menú móvil desplegable Casa de Música -->
    <div class="mobile-menu d-md-none" 
         [class.mobile-menu-open]="mobileMenuOpen"
         style="background-color: var(--color-primario); border-top: 2px solid var(--color-resalte);">
      <div class="mobile-menu-content" style="padding: 1rem 0;">
        
        <!-- Link Home -->
        <a routerLink="/home" 
           routerLinkActive="mobile-link-active" 
           class="mobile-nav-link"
           (click)="closeMobileMenu()"
           style="color: rgba(255,255,255,0.9); padding: 1rem; text-decoration: none; font-family: var(--font-titulos); font-weight: 600; display: flex; align-items: center; transition: var(--transition);">
          <span class="material-symbols-outlined" style="margin-right: 0.75rem; font-size: 1.3rem;">home</span>
          <span>Inicio</span>
        </a>
        
        <!-- Enlaces para usuarios autenticados -->
        <ng-container *ngIf="isLoggedIn$ | async; else mobileNotLoggedIn">
          
          <!-- Dashboard -->
          <a routerLink="/dashboard" 
             routerLinkActive="mobile-link-active" 
             class="mobile-nav-link"
             (click)="closeMobileMenu()"
             style="color: rgba(255,255,255,0.9); padding: 1rem; text-decoration: none; font-family: var(--font-titulos); font-weight: 600; display: flex; align-items: center; transition: var(--transition);">
            <span class="material-symbols-outlined" style="margin-right: 0.75rem; font-size: 1.3rem;">dashboard</span>
            <span>Panel de Control</span>
          </a>

          <!-- Divisor -->
          <div style="height: 2px; background: var(--color-resalte); margin: 0.5rem 1rem; border-radius: 1px;"></div>

          <!-- Logout -->
          <button 
            (click)="logout(); closeMobileMenu()" 
            class="mobile-nav-link" 
            style="width: 100%; text-align: left; background: none; border: none; color: var(--color-resalte); padding: 1rem; font-family: var(--font-titulos); font-weight: 600; display: flex; align-items: center; transition: var(--transition);">
            <span class="material-symbols-outlined" style="margin-right: 0.75rem; font-size: 1.3rem;">logout</span>
            <span>Cerrar Sesión</span>
          </button>
          
        </ng-container>
        
        <!-- Enlaces móviles para usuarios no autenticados -->
        <ng-template #mobileNotLoggedIn>
          
          <!-- Login -->
          <a routerLink="/login" 
             routerLinkActive="mobile-link-active" 
             class="mobile-nav-link"
             (click)="closeMobileMenu()"
             style="color: rgba(255,255,255,0.9); padding: 1rem; text-decoration: none; font-family: var(--font-titulos); font-weight: 600; display: flex; align-items: center; transition: var(--transition);">
            <span class="material-symbols-outlined" style="margin-right: 0.75rem; font-size: 1.3rem;">login</span>
            <span>Iniciar Sesión</span>
          </a>
          
          <!-- Register -->
          <a routerLink="/register" 
             routerLinkActive="mobile-link-active" 
             class="mobile-nav-link"
             (click)="closeMobileMenu()"
             style="color: rgba(255,255,255,0.9); padding: 1rem; text-decoration: none; font-family: var(--font-titulos); font-weight: 600; display: flex; align-items: center; transition: var(--transition);">
            <span class="material-symbols-outlined" style="margin-right: 0.75rem; font-size: 1.3rem;">person_add</span>
            <span>Crear Cuenta</span>
          </a>
          
        </ng-template>
      </div>
    </div>

  </div>
</nav>
