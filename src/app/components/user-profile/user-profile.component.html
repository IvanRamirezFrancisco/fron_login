<!-- Mi Perfil - Casa de Música Castillo -->
<div class="user-profile-container">

  <!-- Información del Usuario con Header -->
  <div class="profile-header">
    <div class="user-avatar-large">
      <span class="avatar-initials">{{ getUserInitials() }}</span>
    </div>
    <div class="user-info">
      <h1 class="user-name">{{ getFullName() }}</h1>
      <p class="user-email">{{ currentUser?.email }}</p>
      <div class="membership-info">
        <span class="material-symbols-outlined">calendar_today</span>
        <span>Miembro desde {{ getMemberSince() }}</span>
      </div>
    </div>
  </div>

  <!-- Contenido del Perfil -->
  <div class="profile-content" *ngIf="!isLoading">

    <!-- Información Personal -->
    <div class="profile-section">
      <div class="section-header">
        <div class="section-title">
          <span class="material-symbols-outlined">person</span>
          <h2>Información Personal</h2>
        </div>
        <button class="btn-edit" (click)="editPersonalInfo()">
          <span class="material-symbols-outlined">edit</span>
          Editar
        </button>
      </div>

      <div class="info-grid">
        <div class="info-item">
          <label>Nombre Completo</label>
          <span>{{ getFullName() }}</span>
        </div>
        <div class="info-item">
          <label>Correo Electrónico</label>
          <span>{{ currentUser?.email }}</span>
        </div>
        <div class="info-item">
          <label>Teléfono</label>
          <span>{{ currentUser?.phone || 'No registrado' }}</span>
        </div>
        <div class="info-item">
          <label>Fecha de Registro</label>
          <span>{{ getMemberSince() }}</span>
        </div>
      </div>
    </div>

    <!-- Seguridad y Contraseña -->
    <div class="profile-section">
      <div class="section-header">
        <div class="section-title">
          <span class="material-symbols-outlined">lock</span>
          <h2>Seguridad y Contraseña</h2>
        </div>
        <button class="btn-edit" (click)="changePassword()">
          <span class="material-symbols-outlined">key</span>
          Cambiar Contraseña
        </button>
      </div>

      <div class="password-info">
        <div class="info-item">
          <label>Último cambio</label>
          <span>Hace 1 año</span>
        </div>
        <p class="security-tip">
          <span class="material-symbols-outlined">info</span>
          Se recomienda cambiar la contraseña cada 6 meses
        </p>
      </div>
    </div>

    <!-- Métodos de Seguridad -->
    <div class="profile-section">
      <div class="section-header">
        <div class="section-title">
          <span class="material-symbols-outlined">shield</span>
          <h2>Métodos de Autenticación</h2>
        </div>
      </div>

      <div class="security-methods">
        <div 
          class="security-method-card" 
          *ngFor="let method of securityMethods"
          [class.active]="method.isActive"
        >
          <div class="method-info">
            <div class="method-icon">
              <span class="material-symbols-outlined">{{ method.icon }}</span>
            </div>
            <div class="method-details">
              <h3>{{ method.name }}</h3>
              <p>{{ method.description }}</p>
              <div class="method-status">
                <span 
                  class="status-indicator" 
                  [class.active]="method.isActive"
                  [class.inactive]="!method.isActive"
                >
                  <span class="material-symbols-outlined">
                    {{ method.isActive ? 'check_circle' : 'radio_button_unchecked' }}
                  </span>
                  {{ method.isActive ? 'Activado' : 'Desactivado' }}
                </span>
              </div>
            </div>
          </div>
          <div class="method-actions">
            <button 
              class="btn-method-action"
              [class.btn-active]="method.isActive"
              [class.btn-inactive]="!method.isActive"
              (click)="onSecurityAction(method)"
              [disabled]="!method.canToggle"
            >
              {{ method.actionText }}
            </button>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Estado de Carga -->
  <div class="loading-state" *ngIf="isLoading">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Cargando información del perfil...</p>
    </div>
  </div>

</div>
